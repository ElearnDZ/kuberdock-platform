{% extends "index.html" %}
{% block script_templates %}

    <script type="text/template" id="node-detailed-layout-template">
        <ul class="nav nav-tabs">
            <% var s = {};
            switch (tab) {
                case 'settings': s.settings = 'active'; break;
                case 'stats': s.stats = 'active'; break;
                case 'logs': s.logs = 'active'; break;
                case 'troubles': s.troubles = 'active'; break;
            } %>
            <li role="presentation" class="<%- s.settings %>"><a  class="nodeSettingsTab" href="">Settings</a></li>
            <li role="presentation" class="<%- s.stats %>"><a class="nodeStatsTab" href="">Statistics</a></li>
            <li role="presentation" class="<%- s.logs %>"><a class="nodeLogsTab" href="">Logs</a></li>
            <li role="presentation" class="<%- s.troubles %>"><a class="nodeTroublesTab" href="">Troubles</a></li>
        </ul>
        <div id="tab-content">div tab_content</div>
    </script>

    <script type="text/template" id="node-settings-tab-template">
        <h3>Hostname: <%- hostname %></h3>
        <h3>Status: <%- status %></h3>
        <h3>Software version: <%- annotations.sw_version %></h3>
        <hr>
        <div class="panel panel-info">
            <div class="panel-heading"><strong>Advanced settings(optional)</strong></div>
            <div class="panel-body">
                <table class="table table-bordered btn-group-justified">
                    <thead>
                        <tr>
                            <th>Label</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% _.each(labels, function(v,k){ %>
                        <tr>
                            <td><%- k %></td>
                            <td><%- v %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="text-center">
            <button id="node-add-btn" class="btn btn-lg btn-success" type="submit">Save</button>
        </div>
    </script>

    <script type="text/template" id="node-stats-tab-template">
        PODS, DOCKERS LIST, CPU, RAM, DISK etc...
    </script>

    <script type="text/template" id="node-logs-tab-template">
        <div class="node-logs">
            <% _.each(logs, function(line){ %>
            <p><%- line %></p>
            <% }) %>
        </div>
    </script>

    <script type="text/template" id="node-troubles-tab-template">
        List of errors, Disk space problems, logs, etc...
    </script>

    <script type="text/template" id="node-add-layout-template">
        <div class="breadcrumbs-wrapper">
            <div class="container breadcrumbs" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <div id="nodes-page">Nodes</div>
                    </li>
                    <li class="active">
                        Add node
                    </li>
                </ul>
            </div>
        </div>
        <div class="container">
            <div id="node-contents"> 
                <div class="node-steps">
                    <div id="node-find-step">div find step</div>
                    <div id="node-final-step"></div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="node-find-step-template">
        <div id="address-spinner"></div>
        <div class="form-field col-lg-6">
            <label for="node_address">Enter Node name</label>
            <input class="find-input" type="text" placeholder="IP Address or Hostname" id="node_address" name="node_address"/>
        </div>
    </script>

    <script type="text/template" id="node-final-step-template">
        <div class="col-lg-12">
            <div class="col-lg-6">
                <label for="extra-options">Extra Options</label>
                <select id="extra-options">
                    <option value="Choose kube type" disabled selected>Choose kube type</option>
                    <option value="1">1</option>
                    <option value="1">2</option>
                    <option value="1">3</option>
                </select>
                <input value="" placeholder="Add labels">
            </div>
            <div class="col-lg-6 right">
                <div class="info">
                    <p class="">CPU: 8 cores with 3GHz</p>
                    <p class="">RAM: 64GB DDR3 - 2000</p>
                    <p class="">SDD: 20x320GB in Raid 0</p>
                </div>
            </div>
        </div>
        <button id="node-add-btn" type="submit">Add</button>
        <button id="node-cancel-btn" type="submit">Cancel</button>
    </script>

    <script type="text/template" id="node-console-template">
        <hr>
        <div class="well">
            <% _.each(text, function(x){ %>
            <p><strong><%- x %></strong></p>
            <% }) %>
        </div>
        <button id="main" class="btn btn-lg btn-success">TO MAIN</button>
    </script>

    <script type="text/template" id="node-item-template">
        <td>
            <button id="detailedNode" class="btn btn-xs btn-link" title="Settings">
                  Some node name     
            </button>
        </td>
        <td><%- ip %></td>
        <td>
            <%- hostname ? hostname : 'Not specified' %>
            <span class="more-ico"  data-toggle="tooltip" data-placement="bottom" title="<%- hostname ? hostname : 'Not specified' %>"></span>
        </td>
        <% var st_type = 'text-danger';
           switch (status) {
                case 'running': st_type = 'text-success'; break;
                case 'removing...': st_type = 'text-info'; break;
           }
        %>
        <td>50/100</td>
        <td>51%</td>
        <td>20 (100)</td>
        <td class="<%- st_type %>">
            <% if (st_type === 'text-danger') { %>
            <button id="detailedTroublesTab" class="btn btn-xs btn-link dropdown-toggle" title="See details">
                <%- status %>
            </button>
            <% }  else { %>
                <%- status %>
            <% } %> 
        </td>
    </script>

    <script type="text/template" id="nodes-list-template">
        <div class="breadcrumbs-wrapper">
            <div class="container breadcrumbs" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li class="active">
                        Nodes
                    </li>
                </ul><!-- /.breadcrumb -->
                <div class="control-group">
                    <button id="add_node">Add Node</button>
                    <div class="nav-search" id="nav-search">
                        <form class="form-search">
                            <input type="text" placeholder="Search" class="nav-search-input" id="nav-search-input" autocomplete="off">
                            <i class="nav-search-icon"></i>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="active-item-control">
                <span>Some nod name</span>
                <button id="deleteNode" class="btn btn-xs btn-link" title="Remove">Delete</button>
            </div>
        <!--<div><strong>You have <%- totalNodes %> nodes</strong></div -->
            <table id="nodelist-table" class="table tablesorter tablesorter-default">
                <thead>
                    <tr class="tablesorter-headerRow">
                        <th data-column="0" class="tablesorter-header tablesorter-headerDesc" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Node<b class="caret"></b></div></th>
                        <th data-column="1" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">IP<b class="caret"></b></div></th>
                        <th data-column="2" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Kube type<b class="caret"></b></div></th>
                        <th data-column="3" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Kube capacity<b class="caret"></b><br>(used/max)</div></th>
                        <th data-column="4" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Average<b class="caret"></b><br>CPU usage</div></th>
                        <th data-column="5" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Active pods<b class="caret"></b><br>(containers)</div></th>
                        <th data-column="6" class="tablesorter-header" tabindex="0" unselectable="on" style="-webkit-user-select: none;"><div class="tablesorter-header-inner">Status<b class="caret"></b></div></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table> 
        </div>
    </script>

    <script type="text/template" id="nodes-layout-template">
        <div id="main">main div text</div>
        <div id="pager">pager div text</div>
    </script>

{#    Copy from main app, delete when merge #}
    <script type="text/template" id="paginator-template">
        <% if ( c.state.pageSize < c.state.totalRecords){ %>
        <ul class="pager">
            <li class="paginatorFirst pseudo-link btn btn-default btn-sm btn-group">first</li>
            <li class="paginatorPrev pseudo-link btn btn-default btn-sm btn-group">prev</li>
            <li class="paginatorStat"><%- c.state.currentPage %> of <%- c.state.totalPages %></li>
            <li class="paginatorNext pseudo-link btn btn-default btn-sm btn-group">next</li>
            <li class="paginatorLast pseudo-link btn btn-default btn-sm btn-group">last</li>
        </ul>
        <% } %>
    </script>
{#    ===================================== #}

{% endblock %}

{% block app_js_asset %}{% endblock %} {# To cut off app_js temporary #}

{% block nodes_app_js_asset %}
    {% assets "nodes_app_js" -%}
        <script src="{{ ASSET_URL }}"></script>
    {% endassets %}
    <script type="text/javascript">
        NodesApp.Data.nodes = new NodesApp.Data.NodesCollection({{ nodes_collection|safe }});
    </script>
{% endblock %}