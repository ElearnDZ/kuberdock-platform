- name: Patching a UI
  lineinfile:
      dest: "{{ master_kd_src_path }}/kubedock/frontend/templates/apps/index.html"
      regexp: "{{ item }}"
      state: absent
  with_items:
      - "^(.*)remove this line to uncomment$"
      - "^(.*)remove next line to uncomment (end of block)$"
      - "^([ ]+)#}$"
  tags:
  - ui_patch

- name: Patching a UI on host
  become: False
  lineinfile:
      dest: "{{ host_proj_root }}/kubedock/frontend/templates/apps/index.html"
      regexp: "{{ item }}"
      state: absent
  with_items:
      - "^(.*)remove this line to uncomment$"
      - "^(.*)remove next line to uncomment (end of block)$"
      - "^([ ]+)#}$"
  delegate_to: localhost
  tags:
  - ui_patch

- name: Hide modified UI file from git
  become: False
  command: git update-index --assume-unchanged "{{ host_proj_root }}/kubedock/frontend/templates/apps/index.html"
  delegate_to: localhost
  tags:
  - ui_patch




